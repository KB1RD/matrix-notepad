(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{563:function(t,e,r){var content=r(580);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(69).default)("0a2007cb",content,!0,{sourceMap:!1})},567:function(t,e,r){"use strict";var n={data:function(){return{alerts:[]}},methods:{alert:function(t){var e=t.variant,r=t.dismissible,n=void 0===r||r,o=t.contents,l=void 0===o?"":o;this.alerts.push({variant:e,dismissible:n,contents:l})}}},o=r(76),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.alerts,(function(a){return r("b-alert",{key:a.contents,attrs:{dismissible:a.dismissible,variant:a.variant,show:""}},[t._v("\n    "+t._s(a.contents)+"\n  ")])})),1)}),[],!1,null,null,null);e.a=component.exports},579:function(t,e,r){"use strict";var n=r(563);r.n(n).a},580:function(t,e,r){(e=r(68)(!1)).push([t.i,"#signin-dialog{margin:10px;width:100%;max-width:300px;text-align:center;border-radius:10px;box-shadow:0 0 20px hsla(0,0%,100%,.46667)}#logo-svg{max-width:300px;margin:40px 10px;-webkit-filter:drop-shadow(0 0 5px hsla(0,0%,100%,.5));filter:drop-shadow(0 0 5px rgba(255,255,255,.5))}",""]),t.exports=e},589:function(t,e,r){"use strict";r.r(e);r(14),r(12),r(10),r(9),r(13),r(89);var n=r(32),o=(r(34),r(227),r(2)),l=r(222),c=r(576),d=r(33),f=r(567);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={layout:"gradient-bg-full",components:{SimpleSVG:c.SimpleSVG,AlertSection:f.a},data:function(){return{form:{id:"",pass:"",checked:!0,url:""},infer_hs:!0,signing_in:!0}},computed:{is_busy:function(){return this.$store.getters.hasBlockingOperation},id_valid:function(){var t=/^[@][^@:]*:[^@:]*(:[0-9]+)?$/gm.exec(this.form.id);return this.form.id.length?t&&0===t.index||!1:void 0}},mounted:function(){var t=this;this.$onPersistStoreReady((function(){if(t.$store.state.matrix.matrix_state&&""!==t.$store.state.matrix.matrix_state&&"STOPPED"!==t.$store.state.matrix.matrix_state)t.redirect();else{var e=t.$store.state.matrix.credentials;e.hs&&e.access_token&&t.performSignInOperation(t.$matrix.tokenSignIn(e.hs,e.access_token))}}))},methods:h({redirect:function(){var path=this.$route.query.redirect_to||"/";path.startsWith("/")||(path="/"+path),this.$router.replace({path:path})},onUserIdChange:function(){if(this.form.id.length){for(;this.form.id.lastIndexOf("@")>0;)this.form.id=this.form.id.slice(0,this.form.id.lastIndexOf("@"))+":"+this.form.id.slice(this.form.id.lastIndexOf("@")+1,this.form.id.length);this.form.id.startsWith("@")||(this.form.id="@"+this.form.id)}},performSignInOperation:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$matrix.shutdown();var r=this;r.$store.dispatch("watchBlockingOperation",Object(n.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t;case 3:data=n.sent,e&&r.updateSettings(h({},data,{room:""})),r.setup_visible=!1,r.redirect(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),d.a.error("Failed to sign in",n.t0),r.$refs.alerts.alert({contents:"Failed to sign in!",variant:"danger"});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))())},onFormSubmit:function(t){if(t.preventDefault(),this.id_valid){var e=this.form,r=e.id,n=e.pass,o=e.url,l=e.checked;this.performSignInOperation(this.$matrix.userPassSignIn(l?void 0:o,r,n),!0)}}},Object(l.b)({updateSettings:"matrix/updateSettings"}))},x=(r(579),r(76)),component=Object(x.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("SimpleSVG",{attrs:{id:"logo-svg",filepath:"/logo/notepad logo.svg",fill:"#fff",stroke:"#fff"}}),t._v(" "),r("b-card",{attrs:{id:"signin-dialog",title:"Sign In"}},[r("b-card-text",[t._v("\n      Software written by Matrix users like you. Check it out on\n      "),r("a",{attrs:{href:"https://github.com/KB1RD/matrix-notepad"}},[t._v("GitHub")]),t._v(" and come\n      chat on\n      "),r("a",{attrs:{href:"https://matrix.to/#/#matrix-collaboration:kb1rd.net?via=kb1rd.net&via=matrix.org&via=matrix.geklautecloud.de"}},[t._v("\n        #matrix-collaboration:kb1rd.net.\n      ")])]),t._v(" "),r("AlertSection",{ref:"alerts"}),t._v(" "),r("b-form",{on:{submit:t.onFormSubmit}},[r("b-form-group",{attrs:{"label-for":"mxid-input"}},[r("b-form-input",{attrs:{id:"mxid-input",disabled:t.is_busy,state:t.id_valid,required:"",placeholder:"@name:server.org"},on:{input:t.onUserIdChange},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),r("b-form-group",{attrs:{"label-for":"pass-input"}},[r("b-form-input",{attrs:{id:"pass-input",disabled:t.is_busy,type:"password",required:"",placeholder:"Password"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1),t._v(" "),r("b-form-group",[r("b-form-checkbox",{attrs:{disabled:t.is_busy},model:{value:t.form.checked,callback:function(e){t.$set(t.form,"checked",e)},expression:"form.checked"}},[t._v("\n          Infer homeserver URL\n        ")])],1),t._v(" "),t.form.checked?t._e():r("b-form-group",{attrs:{"label-for":"mxid-input"}},[r("b-form-input",{attrs:{id:"mxid-input",required:!t.form.checked,disabled:t.is_busy,state:t.url_valid,placeholder:"https://matrix.server.org"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),r("b-alert",{attrs:{show:!t.form.checked&&t.form.url.toLowerCase().startsWith("http:"),variant:"warning"}},[t._v("\n        Warning: This server address is using insecure HTTP. You should always\n        use HTTPS to connect to your server. HTTP support is for development\n        and testing purposes only.\n      ")]),t._v(" "),r("b-button",{attrs:{type:"submit",block:"",variant:"primary",disabled:t.is_busy}},[t.is_busy?r("b-spinner",{attrs:{small:""}}):t._e(),t._v("\n        "+t._s(t.is_busy?"Signing in...":"Sign In")+"\n      ")],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);