(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1304:function(e,t,r){var content=r(1321);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(67).default)("0a2007cb",content,!0,{sourceMap:!1})},1320:function(e,t,r){"use strict";var n=r(1304);r.n(n).a},1321:function(e,t,r){(e.exports=r(66)(!1)).push([e.i,"#signin-dialog{margin:10px;width:100%;max-width:300px;text-align:center;border-radius:10px;box-shadow:0 0 20px hsla(0,0%,100%,.46667)}#logo-svg{max-width:300px;margin:40px 10px;-webkit-filter:drop-shadow(0 0 5px hsla(0,0%,100%,.5));filter:drop-shadow(0 0 5px rgba(255,255,255,.5))}",""])},1330:function(e,t,r){"use strict";r.r(t);r(316),r(120),r(82),r(63),r(150),r(81),r(148),r(317);var n=r(203),o=r(312),l=r(1317),c=r(50);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(source,!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={layout:"gradient-bg-full",components:{SimpleSVG:l.SimpleSVG},data:function(){return{settings:this.$form.createForm(this),infer_hs:!0,signing_in:!0}},computed:{is_busy:function(){return this.$store.getters.hasBlockingOperation}},mounted:function(){var e=this;this.$onPersistStoreReady((function(){if(e.$store.state.matrix.matrix_state&&""!==e.$store.state.matrix.matrix_state&&"STOPPED"!==e.$store.state.matrix.matrix_state)e.redirect();else{var t=e.$store.state.matrix.credentials;t.hs&&t.access_token&&e.performSignInOperation(e.$matrix.tokenSignIn(t.hs,t.access_token))}}))},methods:m({redirect:function(){var path=this.$route.query.redirect_to||"/";path.startsWith("/")||(path="/"+path),this.$router.replace({path:path})},onUserIdChange:function(e){e.target.value.length&&(e.target.value.lastIndexOf("@")>0&&(e.target.value=e.target.value.replace(/@/g,"")),e.target.value.startsWith("@")||(e.target.value="@"+e.target.value))},performSignInOperation:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$matrix.shutdown();var data,r=this.$message.loading("Signing in...",0),n=this;n.$store.dispatch("watchBlockingOperation",regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,regeneratorRuntime.awrap(e);case 3:data=o.sent,t&&n.updateSettings(m({},data,{room:""})),n.$message.success("You're signed in!"),n.setup_visible=!1,n.redirect(),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(0),c.a.error("Failed to sign in",o.t0),n.$message.error("Failed to sign in!");case 14:r();case 15:case"end":return o.stop()}}),null,null,[[0,10]]))},onFormSubmit:function(e){e.preventDefault();var t=this;this.settings.validateFields((function(e,r){e||t.performSignInOperation(t.$matrix.userPassSignIn(r.url,r.id,r.pass),!0)}))}},Object(o.b)({updateSettings:"matrix/updateSettings"}))},h=(r(1320),r(68)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("SimpleSVG",{attrs:{id:"logo-svg",filepath:"/logo/notepad logo.svg",fill:"#fff",stroke:"#fff"}}),e._v(" "),r("a-card",{attrs:{id:"signin-dialog"}},[r("a-card-meta",{attrs:{title:"Sign In"},scopedSlots:e._u([{key:"description",fn:function(){return[e._v("\n        Software written by Matrix users like you. Check it out on\n        "),r("a",{attrs:{href:"https://github.com/KB1RD/matrix-notepad"}},[e._v("GitHub")]),e._v(" and come\n        chat on\n        "),r("a",{attrs:{href:"https://matrix.to/#/#matrix-collaboration:kb1rd.net?via=kb1rd.net&via=matrix.org&via=matrix.geklautecloud.de"}},[e._v("\n          #matrix-collaboration:kb1rd.net.\n        ")])]},proxy:!0}])}),e._v(" "),r("a-form",{staticStyle:{"margin-top":"50px","text-align":"left"},attrs:{form:e.settings,layout:"vertical","hide-required-mark":""},on:{submit:e.onFormSubmit}},[r("a-row",{attrs:{gutter:16}},[r("a-col",[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!0,message:"Enter your username"},{pattern:/^[@][^\@\:]*:[^\@\:]*(:[0-9]+)?$/gm,message:"Enter your full Matrix ID (ex. @name:server.org)"}]}],expression:"[\n                'id',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Enter your username'\n                    },\n                    {\n                      pattern: /^[@][^\\@\\:]*:[^\\@\\:]*(:[0-9]+)?$/gm,\n                      message:\n                        'Enter your full Matrix ID (ex. @name:server.org)'\n                    }\n                  ]\n                }\n              ]"}],attrs:{placeholder:"@name:server.org",disabled:e.is_busy},on:{change:e.onUserIdChange}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1)],1)],1),e._v(" "),r("a-row",{attrs:{gutter:16}},[r("a-col",[r("a-form-item",[r("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["pass",{rules:[{required:!0,message:"Enter your password"}]}],expression:"[\n                'pass',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Enter your password'\n                    }\n                  ]\n                }\n              ]"}],attrs:{placeholder:"Password",disabled:e.is_busy}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],1),e._v(" "),r("a-row",{attrs:{gutter:16}},[r("a-col",[r("a-form-item",[r("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["infer_hs"],expression:"['infer_hs']"}],attrs:{disabled:e.is_busy},model:{value:e.infer_hs,callback:function(t){e.infer_hs=t},expression:"infer_hs"}},[e._v("\n              Infer homeserver URL\n            ")])],1)],1)],1),e._v(" "),e.infer_hs?e._e():r("a-row",{attrs:{gutter:16}},[r("a-col",[r("a-form-item",{attrs:{label:"Homeserver URL"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!e.infer_hs,message:"Enter the your homeserver URL"}]}],expression:"[\n                'url',\n                {\n                  rules: [\n                    {\n                      required: !infer_hs,\n                      message: 'Enter the your homeserver URL'\n                    }\n                  ]\n                }\n              ]"}],attrs:{placeholder:"https://server.org",disabled:e.is_busy}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"database"},slot:"prefix"})],1)],1)],1)],1),e._v(" "),r("a-row",{attrs:{gutter:16}},[r("a-col",[r("a-button",{attrs:{"html-type":"submit",type:"primary",block:"",loading:e.is_busy}},[e._v("\n            "+e._s(e.is_busy?"Working...":"Sign In")+"\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);