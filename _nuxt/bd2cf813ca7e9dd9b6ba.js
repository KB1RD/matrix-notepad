(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1301:function(e,t,n){"use strict";var o={props:{cansync:Boolean},data:function(){return{syncdepth:1,breakpoint_options:[{label:"Local insertation events",value:"LI"},{label:"Local removal events",value:"LR"},{label:"Remote insertation events",value:"RI"},{label:"Remote removal events",value:"RR"}]}}},r=n(68),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{"margin-bottom":"20px"}},[n("a-card-meta",{attrs:{title:"Debug Panel",description:e.$store.state.matrix.working_room+" - "+e.$store.state.matrix.matrix_state}}),e._v(" "),n("a-form-item",{attrs:{label:"Breakpoints"}},[n("a-checkbox-group",{attrs:{value:e.$store.getters["debugstate/breakpoints"],options:e.breakpoint_options},on:{input:function(t){return e.$store.commit("debugstate/setBreakpoints",t)}}})],1),e._v(" "),n("a-row",[n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"Enable syncback (Only affects initial load)"}},[n("a-switch",{attrs:{checked:e.$store.getters["debugstate/syncback"]},on:{change:function(t){return e.$store.commit("debugstate/setSyncbackEnabled",t)}}})],1)],1),e._v(" "),n("a-col",{attrs:{span:5}},[n("a-form-item",{attrs:{label:"Manual sync"}},[n("a-input-group",{attrs:{compact:""}},[n("a-input-number",{attrs:{min:0,max:1e3,disabled:!e.cansync},model:{value:e.syncdepth,callback:function(t){e.syncdepth=t},expression:"syncdepth"}}),e._v(" "),n("a-button",{attrs:{type:"primary",disabled:!e.cansync},on:{click:function(t){return e.$emit("fetch",e.syncdepth)}}},[e._v("\n            Fetch\n          ")])],1)],1)],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-form-item",{attrs:{label:"Dump BST"}},[n("a-button-group",[n("a-button",{on:{click:function(t){return e.$emit("dumpLogoot")}}},[e._v("Logoot")]),e._v(" "),n("a-button",{on:{click:function(t){return e.$emit("dumpLdoc")}}},[e._v("Ldoc")]),e._v(" "),n("a-button",{on:{click:function(t){return e.$emit("dumpRemoval")}}},[e._v("Removal")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports},1324:function(e,t,n){"use strict";n.r(t);var o=n(1301),r=(n(147),n(150),n(51)),l={data:function(){return{form:this.$form.createForm(this),type:"n",add_alias:!1,add_name:!1,visible:!1,adding_room:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},onFormSubmit:function(e){var t=this;if(this.$matrix.client)if("n"===this.type){this.adding_room=!0;var n=this.$message.loading("Creating room...",0);this.$matrix.client.createRoom({room_alias_name:e.add_alias?e.alias:void 0,name:e.add_name?e.name:void 0}).then((function(e){var n=e.room_id;t.$message.success("Room created"),n&&t.$router.replace("/edit/"+encodeURIComponent(n))}),(function(e){r.a.error("Failed to create room",e),t.$message.error("Failed to create room!")})).then((function(){t.adding_room=!1,n()}))}else if("j"===this.type){this.adding_room=!0;var o=this.$message.loading("Joining room...",0);this.$matrix.client.joinRoom(e.room,{syncRoom:!1}).then((function(e){var n=e.roomId;t.$message.success("Room joined"),n&&t.$router.replace("/edit/"+encodeURIComponent(n))}),(function(e){r.a.error("Failed to join room",e),t.$message.error("Failed to join room!")})).then((function(){t.adding_room=!1,o()}))}},handleOk:function(e){var t=this;this.form.validateFields((function(e,n){e||t.onFormSubmit(n)}))},handleCancel:function(e){this.visible=!1}}},c=n(68),m=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"Add a Room",visible:e.visible,"confirm-loading":e.adding_room,closable:!e.adding_room,"mask-closable":!e.adding_room,"ok-text":"n"===e.type?"Create":"Join","cancel-button-props":{props:{disabled:e.adding_room}}},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-form",{attrs:{form:e.form,layout:"vertical","hide-required-mark":""}},[n("a-row",{attrs:{gutter:16}},[n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:"n"}],expression:"[\n            'type',\n            {\n              initialValue: 'n'\n            }\n          ]"}],staticStyle:{width:"240px"},on:{change:function(t){return e.type=t}}},[n("a-select-option",{attrs:{value:"n"}},[e._v("Create a new room")]),e._v(" "),n("a-select-option",{attrs:{value:"j"}},[e._v("Join an existing room")])],1)],1)],1),e._v(" "),"n"===e.type?n("a-row",{attrs:{gutter:16}},[n("a-form-item",[n("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["add_alias"],expression:"['add_alias']"}],on:{change:function(t){return e.add_alias=t.target.checked}}},[e._v("\n          Add an alias\n        ")])],1)],1):e._e(),e._v(" "),"n"===e.type&&e.add_alias?n("a-row",{attrs:{gutter:16}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["alias",{rules:[{required:!0,message:"An alias is required"},{pattern:/^[^#:]*$/gm,message:"Enter only the localpart of the alias"}]}],expression:"[\n            'alias',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'An alias is required'\n                },\n                {\n                  pattern: /^[^#:]*$/gm,\n                  message: 'Enter only the localpart of the alias'\n                }\n              ]\n            }\n          ]"}],attrs:{placeholder:"Alias"}})],1)],1):e._e(),e._v(" "),"n"===e.type?n("a-row",{attrs:{gutter:16}},[n("a-form-item",[n("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["add_name"],expression:"['add_name']"}],on:{change:function(t){return e.add_name=t.target.checked}}},[e._v("\n          Add a name\n        ")])],1)],1):e._e(),e._v(" "),"n"===e.type&&e.add_name?n("a-row",{attrs:{gutter:16}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"A name is required"}]}],expression:"[\n            'name',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'A name is required'\n                }\n              ]\n            }\n          ]"}],attrs:{placeholder:"Name"}})],1)],1):e._e(),e._v(" "),"j"===e.type?n("a-row",{attrs:{gutter:16}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["room",{rules:[{required:!0,message:"A room to join is required"},{pattern:/^[!#][^!#:]*:[^!#:]*(:[0-9]+)?$/gm,message:"This is not a valid Matrix room ID or alias"}]}],expression:"[\n            'room',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'A room to join is required'\n                },\n                {\n                  pattern: /^[!#][^!#:]*:[^!#:]*(:[0-9]+)?$/gm,\n                  message: 'This is not a valid Matrix room ID or alias'\n                }\n              ]\n            }\n          ]"}],attrs:{placeholder:"!roomid:matrix.org"}})],1)],1):e._e()],1)],1)}),[],!1,null,null,null).exports,d={components:{DebugPanel:o.a,AddRoomModal:m},computed:{rooms:function(){return this.$store.getters["matrix/rooms"]}}},v=Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",[e.$store.state.debug?n("DebugPanel"):e._e(),e._v(" "),n("a-button",{staticStyle:{margin:"10px 0px"},attrs:{type:"dashed",block:""},on:{click:function(t){return e.$refs.modal.show()}}},[e._v("\n      + Add\n    ")]),e._v(" "),n("AddRoomModal",{ref:"modal"}),e._v(" "),n("a-config-provider",{scopedSlots:e._u([{key:"renderEmpty",fn:function(){return[n("div",{staticStyle:{"text-align":"center"}},[n("a-icon",{staticStyle:{"font-size":"72px"},attrs:{type:"file-unknown"}}),e._v(" "),n("p",[e._v("You have no rooms")])],1)]},proxy:!0}])},[e._v(" "),n("a-list",{staticClass:"room-list",attrs:{"item-layout":"horizontal","data-source":e.rooms},scopedSlots:e._u([{key:"renderItem",fn:function(t){return n("a-list-item",{},[n("a-list-item-meta",{attrs:{description:t.roomId}},[n("nuxt-link",{attrs:{slot:"title",to:"/edit/"+t.roomId},slot:"title"},[e._v("\n              "+e._s(t.name)+"\n            ")])],1)],1)}}])})],1)],1)])}),[],!1,null,null,null);t.default=v.exports}}]);