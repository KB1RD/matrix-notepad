(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1343:function(e,t,o){var content=o(1363);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(71).default)("6759f5ab",content,!0,{sourceMap:!1})},1344:function(e,t,o){"use strict";o(134),o(135),o(59);var n={props:{cansync:Boolean},data:function(){return{syncdepth:1,breakpoint_options:[{label:"Local insertation events",value:"LI"},{label:"Local removal events",value:"LR"},{label:"Remote insertation events",value:"RI"},{label:"Remote removal events",value:"RR"}]}},methods:{dumpLogoot:function(){this.$matrix.doc&&console.log(this.$matrix.doc.logoot_bst.toString())},dumpLdoc:function(){this.$matrix.doc&&console.log(this.$matrix.doc.ldoc_bst.toString())},dumpRemoval:function(){this.$matrix.doc&&console.log(this.$matrix.doc.removal_bst.toString())}}},r=o(75),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-card",{staticStyle:{"margin-bottom":"20px"}},[o("a-card-meta",{attrs:{title:"Debug Panel",description:e.$store.state.matrix.working_room+" - "+e.$store.state.matrix.matrix_state}}),e._v(" "),o("a-form-item",{attrs:{label:"Breakpoints"}},[o("a-checkbox-group",{attrs:{value:e.$store.getters["debugstate/breakpoints"],options:e.breakpoint_options},on:{input:function(t){return e.$store.commit("debugstate/setBreakpoints",t)}}})],1),e._v(" "),o("a-row",[o("a-col",{attrs:{span:8}},[o("a-form-item",{attrs:{label:"Enable syncback (Only affects initial load)"}},[o("a-switch",{attrs:{checked:e.$store.getters["debugstate/syncback"]},on:{change:function(t){return e.$store.commit("debugstate/setSyncbackEnabled",t)}}})],1)],1),e._v(" "),o("a-col",{attrs:{span:5}},[o("a-form-item",{attrs:{label:"Manual sync"}},[o("a-input-group",{attrs:{compact:""}},[o("a-input-number",{attrs:{min:0,max:1e3,disabled:!e.cansync},model:{value:e.syncdepth,callback:function(t){e.syncdepth=t},expression:"syncdepth"}}),e._v(" "),o("a-button",{attrs:{type:"primary",disabled:!e.cansync},on:{click:function(t){return e.$emit("fetch",e.syncdepth)}}},[e._v("\n            Fetch\n          ")])],1)],1)],1),e._v(" "),o("a-col",{attrs:{span:6}},[o("a-form-item",{attrs:{label:"Dump BST"}},[o("a-button-group",[o("a-button",{on:{click:e.dumpLogoot}},[e._v("Logoot")]),e._v(" "),o("a-button",{on:{click:e.dumpLdoc}},[e._v("Ldoc")]),e._v(" "),o("a-button",{on:{click:e.dumpRemoval}},[e._v("Removal")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports},1362:function(e,t,o){"use strict";var n=o(1343);o.n(n).a},1363:function(e,t,o){(e.exports=o(70)(!1)).push([e.i,".vue-codemirror .CodeMirror{height:100%}.container{margin:0 auto;min-height:100vh;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;text-align:center}.container>*{width:100%;max-width:1000px}.room-list{text-align:left}",""])},1365:function(e,t,o){"use strict";o.r(t);var n=o(1344),r=(o(159),o(161),{data:function(){return{form:this.$form.createForm(this),type:"n",add_alias:!1,add_name:!1,visible:!1,adding_room:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},onFormSubmit:function(e){var t=this;if(this.$matrix.client)if("n"===this.type){this.adding_room=!0;var o=this.$message.loading("Creating room...",0);this.$matrix.client.createRoom({room_alias_name:e.add_alias?e.alias:void 0,name:e.add_name?e.name:void 0}).then((function(e){var o=e.room_id;t.$message.success("Room created"),o&&t.$router.replace("/edit/"+encodeURIComponent(o))}),(function(e){console.error("Failed to create room",e),t.$message.error("Failed to create room!")})).then((function(){t.adding_room=!1,o()}))}else if("j"===this.type){this.adding_room=!0;var n=this.$message.loading("Joining room...",0);this.$matrix.client.joinRoom(e.room,{syncRoom:!1}).then((function(e){var o=e.roomId;t.$message.success("Room joined"),o&&t.$router.replace("/edit/"+encodeURIComponent(o))}),(function(e){console.error("Failed to join room",e),t.$message.error("Failed to join room!")})).then((function(){t.adding_room=!1,n()}))}},handleOk:function(e){var t=this;this.form.validateFields((function(e,o){e||t.onFormSubmit(o)}))},handleCancel:function(e){this.visible=!1}}}),l=o(75),c=Object(l.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-modal",{attrs:{title:"Add a Room",visible:e.visible,"confirm-loading":e.adding_room,closable:!e.adding_room,"mask-closable":!e.adding_room,"ok-text":"n"===e.type?"Create":"Join","cancel-button-props":{props:{disabled:e.adding_room}}},on:{ok:e.handleOk,cancel:e.handleCancel}},[o("a-form",{attrs:{form:e.form,layout:"vertical","hide-required-mark":""}},[o("a-row",{attrs:{gutter:16}},[o("a-form-item",[o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:"n"}],expression:"[\n            'type',\n            {\n              initialValue: 'n'\n            }\n          ]"}],staticStyle:{width:"240px"},on:{change:function(t){return e.type=t}}},[o("a-select-option",{attrs:{value:"n"}},[e._v("Create a new room")]),e._v(" "),o("a-select-option",{attrs:{value:"j"}},[e._v("Join an existing room")])],1)],1)],1),e._v(" "),"n"===e.type?o("a-row",{attrs:{gutter:16}},[o("a-form-item",[o("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["add_alias"],expression:"['add_alias']"}],on:{change:function(t){return e.add_alias=t.target.checked}}},[e._v("\n          Add an alias\n        ")])],1)],1):e._e(),e._v(" "),"n"===e.type&&e.add_alias?o("a-row",{attrs:{gutter:16}},[o("a-form-item",[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["alias",{rules:[{required:!0,message:"An alias is required"},{pattern:/^[^#:]*$/gm,message:"Enter only the localpart of the alias"}]}],expression:"[\n            'alias',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'An alias is required'\n                },\n                {\n                  pattern: /^[^#:]*$/gm,\n                  message: 'Enter only the localpart of the alias'\n                }\n              ]\n            }\n          ]"}],attrs:{placeholder:"Alias"}})],1)],1):e._e(),e._v(" "),"n"===e.type?o("a-row",{attrs:{gutter:16}},[o("a-form-item",[o("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["add_name"],expression:"['add_name']"}],on:{change:function(t){return e.add_name=t.target.checked}}},[e._v("\n          Add a name\n        ")])],1)],1):e._e(),e._v(" "),"n"===e.type&&e.add_name?o("a-row",{attrs:{gutter:16}},[o("a-form-item",[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"A name is required"}]}],expression:"[\n            'name',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'A name is required'\n                }\n              ]\n            }\n          ]"}],attrs:{placeholder:"Name"}})],1)],1):e._e(),e._v(" "),"j"===e.type?o("a-row",{attrs:{gutter:16}},[o("a-form-item",[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["room",{rules:[{required:!0,message:"A room to join is required"},{pattern:/^[!#][^!#:]*:[^!#:]*(:[0-9]+)?$/gm,message:"This is not a valid Matrix room ID or alias"}]}],expression:"[\n            'room',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: 'A room to join is required'\n                },\n                {\n                  pattern: /^[!#][^!#:]*:[^!#:]*(:[0-9]+)?$/gm,\n                  message: 'This is not a valid Matrix room ID or alias'\n                }\n              ]\n            }\n          ]"}],attrs:{placeholder:"!roomid:matrix.org"}})],1)],1):e._e()],1)],1)}),[],!1,null,null,null).exports,d={components:{DebugPanel:n.a,AddRoomModal:c},computed:{rooms:function(){return this.$store.getters["matrix/rooms"]}}},m=(o(1362),Object(l.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",[e.$store.state.debug?o("DebugPanel"):e._e(),e._v(" "),o("a-config-provider",{scopedSlots:e._u([{key:"renderEmpty",fn:function(){return[o("div",{staticStyle:{"text-align":"center"}},[o("a-icon",{staticStyle:{"font-size":"72px"},attrs:{type:"file-unknown"}}),e._v(" "),o("p",[e._v("You have no rooms")])],1)]},proxy:!0}])},[e._v(" "),o("a-list",{staticClass:"room-list",attrs:{"item-layout":"horizontal","data-source":e.rooms},scopedSlots:e._u([{key:"renderItem",fn:function(t){return o("a-list-item",{},[o("a-list-item-meta",{attrs:{description:t.roomId}},[o("nuxt-link",{attrs:{slot:"title",to:"/edit/"+t.roomId},slot:"title"},[e._v("\n              "+e._s(t.name)+"\n            ")])],1)],1)}}])})],1),e._v(" "),o("a-button",{attrs:{type:"dashed",block:""},on:{click:function(t){return e.$refs.modal.show()}}},[e._v("+ Add")]),e._v(" "),o("AddRoomModal",{ref:"modal"})],1)])}),[],!1,null,null,null));t.default=m.exports}}]);