(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{573:function(t,o,e){var content=e(593);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(73).default)("6759f5ab",content,!0,{sourceMap:!1})},574:function(t,o,e){"use strict";var n={data:function(){return{alerts:[]}},methods:{alert:function(t){var o=t.variant,e=t.dismissible,n=void 0===e||e,r=t.contents,l=void 0===r?"":r;this.alerts.push({variant:o,dismissible:n,contents:l})}}},r=e(81),component=Object(r.a)(n,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",t._l(t.alerts,(function(a){return e("b-alert",{key:a.contents,attrs:{dismissible:a.dismissible,variant:a.variant,show:""}},[t._v("\n    "+t._s(a.contents)+"\n  ")])})),1)}),[],!1,null,null,null);o.a=component.exports},592:function(t,o,e){"use strict";var n=e(573);e.n(n).a},593:function(t,o,e){(o=e(72)(!1)).push([t.i,".vue-codemirror .CodeMirror{height:100%}.container{margin:0 auto;min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center}.container>*{width:100%;max-width:1000px}.room-list{text-align:left}",""]),t.exports=o},595:function(t,o,e){"use strict";e.r(o);e(28),e(35);var n=e(34),r=e(574),l=e(228),m={components:{AlertSection:r.a},data:function(){return{form:{room:"",name:"",tab:0},adding_room:!1}},computed:{type:function(){return 0===this.form.tab?"n":"j"},room_valid:function(){if("n"===this.type){var t=/^[^!#:]*$/gm.exec(this.form.room);return!(!t||0!==t.index)&&void 0}if("j"===this.type){var o=/^[!#][^!#:]+:[a-zA-Z0-9-.]+(:[0-9]+)?$/gm.exec(this.form.room);return!(!o||0!==o.index)&&void 0}return!1},can_submit:function(){return!1!==this.room_valid&&!this.adding_room},can_edit:function(){return!this.adding_room}},methods:{show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()},onFormSubmit:function(t){var o=this;if(this.$matrix.client){var e=t.room.trim(),r=t.name;this.adding_room=!0,"n"===this.type?this.$matrix.client.createRoom({room_alias_name:""!==e?e:void 0,name:""!==r?r:void 0}).then((function(data){return o.$matrix.client.sendStateEvent(data.room_id,l.b,{type:l.c},"").then((function(){return data}))})).then((function(t){var e=t.room_id;e&&o.$router.replace("/edit/"+encodeURIComponent(e)),o.hide()}),(function(t){n.a.error("Failed to create room",t),o.$refs.alerts.alert({variant:"danger",contents:"Failed to create room!"})})).then((function(){o.adding_room=!1})):"j"===this.type&&this.$matrix.client.joinRoom("".concat(t.room),{syncRoom:!1}).then((function(t){t.roomId;o.hide()}),(function(t){n.a.error("Failed to join room",t),o.$refs.alerts.alert({variant:"danger",contents:"Failed to join room!"})})).then((function(){o.adding_room=!1}))}},handleOk:function(t){t.preventDefault(),this.can_submit&&this.onFormSubmit(this.form)}}},c=e(81),d={components:{AddRoomModal:Object(c.a)(m,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("b-modal",{ref:"modal",attrs:{title:"Add a Room","ok-title":"n"===t.type?"Create":"Join","ok-disabled":!t.can_submit,busy:!t.can_edit,"no-close-on-backdrop":!t.can_edit,"no-close-on-esc":!t.can_edit},on:{ok:t.handleOk}},[e("AlertSection",{ref:"alerts"}),t._v(" "),e("b-form",[e("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:t.form.tab,callback:function(o){t.$set(t.form,"tab",o)},expression:"form.tab"}},[e("b-tab",{attrs:{title:"Create a room",active:""}},[e("b-form-group",{attrs:{"label-for":"name-input"}},[e("b-form-input",{attrs:{id:"name-input",disabled:!t.can_edit,placeholder:"Room Name (optional)"},model:{value:t.form.name,callback:function(o){t.$set(t.form,"name",o)},expression:"form.name"}})],1)],1),t._v(" "),e("b-tab",{attrs:{title:"Join a room"}})],1),t._v(" "),e("b-form-group",{attrs:{"label-for":"room-input"}},[e("b-input-group",{attrs:{prepend:"#"}},[e("b-form-input",{attrs:{id:"room-input","aria-describedby":"room-live-feedback",disabled:!t.can_edit,required:"j"===t.type,state:t.room_valid,placeholder:"n"===t.type?"Room Alias (optional)":"Room Alias or ID"},model:{value:t.form.room,callback:function(o){t.$set(t.form,"room",o)},expression:"form.room"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"room-live-feedback"}},["n"===t.type?[t._v("\n            Enter just the localpart of the alias to create.\n          ")]:t._e(),t._v(" "),"j"===t.type?[t._v("\n            Enter both the localpart and server name with the # or ! (ex.\n            #matrix:matrix.org)\n          ")]:t._e()],2)],1)],1)],1)],1)}),[],!1,null,null,null).exports},computed:{rooms:function(){return this.$store.getters["matrix/rooms"]}}},f=(e(592),Object(c.a)(d,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"container"},[e("div",[e("b-button",{staticStyle:{margin:"10px 0px"},attrs:{variant:"primary",block:""},on:{click:function(o){return t.$refs.modal.show()}}},[t._v("\n      + Add\n    ")]),t._v(" "),e("AddRoomModal",{ref:"modal"}),t._v(" "),e("b-list-group",t._l(t.rooms,(function(o){return e("b-list-group-item",{key:o.roomId,staticClass:"flex-column align-items-start",attrs:{href:"#"},on:{click:function(e){return t.$router.push("/edit/"+o.roomId)}}},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1"},[t._v(t._s(o.name))]),t._v(" "),e("small",{staticClass:"text-muted"},[t._v(t._s(o.roomId))])])])})),1)],1)])}),[],!1,null,null,null));o.default=f.exports}}]);